<odoo>
            
	     
	<template id="report_detailsofsales">
	   <t t-call="web.html_container">
	    	<t t-call="zb_pos_reports.external_layout_pos_reports">
		            <div class="page" style="font-size:12px;">
						<h2>Daily Sales Report</h2>
					<t t-foreach="data" t-as="o">
					 <div class="row mt32">
						<div class="col-3">
			                <strong>Company</strong>:<br/>
			                <span t-esc="res_company.name"/>
	            		</div>
	            		<div class="col-3">
			                <strong>Users</strong>:<br/>
			                <t t-foreach='user_names' t-as='u'>
 	                             <span t-esc="u_value or 'All'"/>,
	                         </t>
	            		</div>
						<div class="col-3">
			                <strong>Print Date</strong>:<br/>
			                <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y')"/>
	            		</div>
	            		<div class="col-3">
	           			</div>
	           		</div>
	           		<div class="row mt32">
						<div class="col-3">
			                <strong>Start Period</strong>:<br/>
			                 <span t-esc="datetime.datetime.strptime(o_value['start_date'], '%Y-%m-%d').strftime('%d/%m/%Y')"/>
	            		</div>
	            		<div class="col-3">
			                <strong>End Period</strong>:<br/>
			                	<span t-esc="datetime.datetime.strptime(o_value['end_date'], '%Y-%m-%d').strftime('%d/%m/%Y')"/>
	            		</div>
	           		</div>
	           		
	           		<div t-if="o_value['report_detail'] =='detail'" style="padding-top:2cm;">
		           		<table class="table table-condensed" style="font-size:13px;">
		                    <thead style="border-bottom:2px solid black;">
		                        <th class="text-center" style="width:4cm;"><strong>Date</strong></th>
		                        <th class="text-center" style="width:4cm;"><strong>Session</strong></th>
		                        <th class="text-center" style="width:4cm;"><strong>Receipt Ref</strong></th>
		                        <th class="text-center" style="width:3cm;"><strong>Invoice no.</strong></th>
		                        <th class="text-center" style="width:4cm;"><strong>Customer Name</strong></th>
		                        <th class="text-center" style="width:3cm;"><strong>Method</strong></th>
		                        <th class="text-center" style="width:5cm;"><strong>Barcode</strong></th>
		                        <th class="text-center" style="width:5cm;"><strong>Product</strong></th>
		                        <!-- <th class="text-center"><strong>Brand</strong></th> -->
		                        <th class="text-center" style="width:2cm;"><strong>Price</strong></th>
		                        <th class="text-center" style="width:2cm;"><strong>Qty</strong></th>
		                        <th class="text-center" style="width:4cm;"><strong>VAT</strong></th>
		                        <th class="text-center" style="width:4cm;"><strong>VAT Amount</strong></th>
		                        <th class="text-center" style="width:2cm;"><strong>Total</strong></th>
								<t t-if="o_value['is_visible']">
		                        	<th class="text-center" style="width:2cm;"><strong>Cost</strong></th>
								</t>
		                        <th class="text-center" style="width:2cm;"><strong>Disc(%)</strong></th>
		                        <th class="text-center"><strong>Profit</strong></th>
		                    </thead>
	                    	 <tbody>
		                    	<t t-set="total_profit" t-value="0"/>
		                    	<t t-set="total_cost" t-value="0"/>
		                    	<t t-set="total_qty" t-value="0"/>
		                    	<t t-set="total_vat" t-value="0"/>
		                    	<t t-set="total_discount" t-value="0"/>
		                    	<tr t-foreach='statement_data' t-as='d'>
		                    	<t t-set="total_vat" t-value="total_vat+d['vat_amount']"/>
			                    	   <td class="text-center">
 	                                	 <span t-esc="datetime.datetime.strptime(str(d['date_order']), '%Y-%m-%d %H:%M:%S').strftime('%d/%m/%Y')"/>
	                           		  </td>
	                           		  <td class="text-center">
 	                                	 <span t-esc="d['session']"/>
	                           		 </td>
	                           		  <td class="text-center">
 	                                	 <span t-esc="d['ref']"/>
	                           		 </td>
	                           		  <td class="text-center">
	                                	<span t-esc="d['pos_name']"/>
	                           		 </td>
	                           		  <td class="text-center">
	                                	<t t-esc="d['customer']" />
	                           		 </td>
	                           		  <td class="text-center">
	                                	<span t-esc="d['method']"/>
	                           		 </td>
	                           		 <td class="text-center">
	                                	<span t-esc="d['barcode']"/>
	                           		 </td>
	                           		 <td class="text-center">
										 <t t-esc="d['name']" />
	                           		  </td>
	                           		 <!-- <td class="text-center">		
	                           		 	<span t-esc="d['brand']"/>
	                    			</td> -->
	                    			<td class="text-center">
	                    				<span t-esc="res_company.currency_id.symbol"/><span t-esc="'%.3f'%(d['price_unit'])"/>	
 									 </td>
	                           		  <td class="text-center">
	                           		  	<t t-set="total_qty" t-value="total_qty+d['qty']"/>
	                                	 <t t-esc="'%.3f'%(d['qty'])"/>
	                           		 </td>
	                           		 <td class="text-center">		
	                           		 	<span t-esc="d['vat']"/>
	                    			</td>
	                    			<td class="text-center">		
	                           		 	<span t-esc="'%.3f'%(d['vat_amount'])"/>
	                    			</td>
	                           		  <td class="text-center">
	                           		  	<span t-esc="res_company.currency_id.symbol"/><t t-esc="'%.3f'%(d['total'])"/>
	                           		 </td>
									 <t t-if="o_value['is_visible']">
	                           		  <td class="text-center">
	                           		   <t t-set="total_cost" t-value="total_cost+d['cost']"/>
	                           		  	<span t-esc="res_company.currency_id.symbol"/><t t-esc="'%.3f'%(d['cost'])"/>
	                           		 </td>
									 </t>
	                           		 <td class="text-center">
	                           		 	<t t-set="total_discount" t-value="total_discount+d['discount']"/>
	                           		 	<span t-esc="res_company.currency_id.symbol"/><t t-esc="'%.3f'%(d['discount'])"/>
	                           		  </td>
	                           		 <td class="text-center">
	                           		 	<t t-set="total_profit" t-value="total_profit+d['profit']"/>
		                            	<span t-esc="res_company.currency_id.symbol"/><span t-esc="'%.3f'%(d['profit'])"/>
		                                
	                    			</td>
		                    	</tr>
		                    </tbody> 
		           		</table>
	           		</div>
					
					<div t-if="o_value['report_detail'] =='normal'" style="padding-top:2cm;">
		           		<table class="table table-condensed" style="font-size:13px;">
		                    <thead style="border-bottom:2px solid black;">
		                        <th class="text-center"><strong>Date</strong></th>
		                        <th class="text-center"><strong>Session</strong></th>
		                        <th class="text-center"><strong>Receipt Ref</strong></th>
		                        <th class="text-center"><strong>Invoice no.</strong></th>
		                        <th class="text-center"><strong>Customer Name</strong></th>
		                        <th class="text-center"><strong>Method</strong></th>
		                        <th class="text-center"><strong>Total[w/o VAT]</strong></th>
								<t t-if="o_value['is_visible']">
		                        	<th class="text-center"><strong>Cost</strong></th>
								</t>
		                        <th class="text-center"><strong>Profit</strong></th>
		                        <th class="text-center"><strong>VAT Amount</strong></th>
		                        <th class="text-center"><strong>Total</strong></th>
		                    </thead>
	                    	 <tbody>
		                    	<t t-set="total_profit" t-value="0"/>
		                    	<t t-set="total_cost" t-value="0"/>
		                    	<t t-set="total_qty" t-value="0"/>
		                    	<t t-set="total_vat" t-value="0"/>
		                    	<t t-set="total_discount" t-value="0"/>
		                    	<tr t-foreach='statement_data' t-as='dat'>
		                    	<t t-set="total_qty" t-value="total_qty+dat['qty']"/>
		                    	<t t-set="total_vat" t-value="total_vat+dat['vat_amount']"/>
		                    	<t t-set="total_discount" t-value="total_discount + dat['discount']"/>
			                    	 <td class="text-center">
			                    	  	 <span t-esc="datetime.datetime.strptime(str(dat['date_order']), '%Y-%m-%d %H:%M:%S').strftime('%d/%m/%Y')"/>
		                           	 </td>
		                           	 <td class="text-center">
			                    	  	<span t-esc="dat['session']"/>
		                           	 </td>
		                           	 <td class="text-center">
 	                                	 <span t-esc="dat['ref']"/>
	                           		 </td>
	                           		  <td class="text-center">
	                                	<span t-esc="dat['pos_name']"/>
	                           		 </td>
	                           		  <td class="text-center">
	                                	<t t-esc="dat['customer']" />
	                           		 </td>
	                           		  <td class="text-center">
	                                	<span t-esc="dat['method']"/>
	                           		 </td>
	                           		 <td class="text-right">	
	                           		 	<span t-esc="res_company.currency_id.symbol"/><t t-esc="'%.3f'%(dat['sub_total'])"/>
	                    			</td>
									<t t-if="o_value['is_visible']">
										  <td class="text-right">
											<t t-set="total_cost" t-value="total_cost+dat['cost']"/>
											<span t-esc="res_company.currency_id.symbol"/><t t-esc="'%.3f'%(dat['cost'])"/>
										 </td>
									</t>
	                           		  <td class="text-right">
                               			<t t-set="total_profit" t-value="total_profit+dat['profit']"/>
		                                <span t-esc="res_company.currency_id.symbol"/> <span t-esc="'%.3f'%(dat['profit'])"/>
	                           		 </td>
									<td class="text-center">		
	                           		 	<span t-esc="'%.3f'%(dat['vat_amount'])"/>
	                    			</td>
									<td class="text-center">
	                           		  	<span t-esc="res_company.currency_id.symbol"/><t t-esc="'%.3f'%(dat['total'])"/>
	                           		 </td>
		                    	</tr>
		                    </tbody>
		           		</table>
	           		</div>
					
	       		   <table class="table table-condensed">
	                    <tr>
	                        <td colspan="2"><strong>Payment</strong></td>
	                    </tr>
	                    <t t-set="total_payment" t-value="0"/>
	                     <tr t-foreach='payment_data' t-as='payment'>
		                    <td><t t-esc="payment['name']" style="float:left;"/></td>
		                    <td class="text-right">
		                    	<t t-set="total_payment" t-value="total_payment+payment['sum']" style="float:right;"/>
		                    	 <strong t-esc="'%.3f'%(payment['sum'])"  style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
		                    </td>
	                	</tr>
	                    <tr>
	                        <td colspan="2"><strong>Summary</strong></td>
	                    </tr>
	                    <tr>
	                      <td><strong>Sales total(Revenue)</strong></td>
                    	   <td class="text-right">
                    		 <strong t-esc="'%.3f'%(total_payment-total_vat)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
                    	  </td>
	                    </tr>
	                    <tr>
	                        <td><strong>Qty of product</strong></td>
	                        <td class="text-right">
	                            <strong t-esc="'%.3f'%(total_qty)" style="float:right;"/>
	                        </td>
	                    </tr>
	                    <tr>
	                        <td><strong>Total VAT</strong></td>
	                        <td class="text-right">
	                            <strong t-esc="'%.3f'%(total_vat)" style="float:right;"/>
	                        </td>
	                    </tr>
	                   <tr>
	                        <td><strong>Total Credit Invoiced</strong></td>
	                        <td class="text-right">
	                           <strong t-esc="'%.3f'%(getsuminvoice2)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
	                        </td>
	                    </tr>
	                    <tr>
	                          <td><strong>Total discount</strong></td>
	                    	  <td class="text-right">
                               	  <strong t-esc="'%.3f'%(get_discount)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
                           	</td>
	                    </tr>
	                  <tr>
	                        <td><strong>Total Sales</strong></td>
	                      <td class="text-right">
                            <strong t-esc="'%.3f'%(total_payment)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
                        </td>
	                    </tr>
					   <t t-if="o_value['is_visible']">
							<tr>
								<td><strong>Total cost</strong></td>
								<td class="text-right">
									<strong t-esc="'%.3f'%(total_cost)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
								</td>
							</tr>
							<tr>
								<td><strong>Total Profit</strong></td>
								<td class="text-right">
									<strong t-esc="'%.3f'%(total_payment-total_vat-total_cost)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
								</td>
							</tr>
					   </t>
	                   <tr>
	                        <td><strong>Total Refund</strong></td>
	                        <td class="text-right">
	                            <strong t-esc="'%.3f'%(refund_total)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
	                        </td>
	                    </tr>
	                  <tr>
	                        <td><strong>Total of the day</strong></td>
	                        <td class="text-right">
	                            <strong t-esc="'%.3f'%(total_payment-writeoff)" style="float:right;"/>&#160;<strong t-esc="res_company.currency_id.symbol" style="float:right;"/>
	                        </td>
	                    </tr> 
	                </table>
	                <div class="row" align = "right">
	                	<t t-if="request.env.user">
	                   		<label>Printed By:</label>
	          				<span t-field="request.env.user.name" />
	          			</t>
	      			</div>
	      			<div class="row">
	               		<strong>Revised By: </strong><span>.........................</span>
	      			</div>
	      			</t>
	      		</div>
	      		</t>
	      	
      		</t>
  </template>
  
</odoo>
